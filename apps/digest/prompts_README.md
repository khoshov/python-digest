# Промпты для агентов

Этот файл содержит описание системы промптов, используемых в проекте.

## Структура

Промпты вынесены в отдельный модуль `apps/digest/prompts.py` для удобства редактирования и версионирования.

### Типы промптов

#### 1. Фильтр статей (Filter Agent)

- **FILTER_SYSTEM_PROMPT** - системный промпт, определяющий роль агента
- **FILTER_USER_PROMPT** - промпт для анализа конкретной статьи

Доступные переменные в `FILTER_USER_PROMPT`:
- `{title}` - заголовок статьи
- `{summary}` - краткое содержание
- `{url}` - ссылка на статью
- `{format_instructions}` - инструкции по формату ответа (генерируются автоматически)

#### 2. Копирайтер (Copywriter Agent)

- **COPYWRITER_SYSTEM_PROMPT** - системный промпт для копирайтера
- **COPYWRITER_USER_PROMPT** - промпт для создания поста

Доступные переменные в `COPYWRITER_USER_PROMPT`:
- `{title}` - заголовок статьи
- `{summary}` - краткое содержание
- `{url}` - ссылка на статью
- `{format_instructions}` - инструкции по формату ответа (генерируются автоматически)

## Использование

### В коде

Промпты можно импортировать:

```python
from apps.digest import prompts

system_prompt = prompts.FILTER_SYSTEM_PROMPT
user_prompt = prompts.FILTER_USER_PROMPT
```

### В моделях

Промпты используются как значения по умолчанию в модели `Project`:

```python
filter_system_prompt = models.TextField(
    default=prompts.FILTER_SYSTEM_PROMPT,
    ...
)
```

### Переопределение в проектах

Каждый проект (модель `Project`) может переопределить промпты через Django Admin:

1. Откройте админку Django
2. Найдите нужный проект
3. Отредактируйте поля промптов
4. Сохраните изменения

## Рекомендации по редактированию

1. **Сохраняйте переменные** - не удаляйте `{title}`, `{summary}`, `{url}`, `{format_instructions}` из промптов
2. **Тестируйте изменения** - после изменения промптов проверьте работу на тестовых данных
3. **Версионируйте** - коммитьте изменения в Git с понятными сообщениями
4. **Документируйте** - если меняете логику, обновите этот README

## Примеры кастомизации

### Изменить стиль постов

Отредактируйте `COPYWRITER_SYSTEM_PROMPT`:

```python
COPYWRITER_SYSTEM_PROMPT = """Ты креативный копирайтер с чувством юмора.
Пишешь короткие, цепляющие посты с неожиданными метафорами."""
```

### Изменить критерии фильтрации

Отредактируйте `FILTER_USER_PROMPT`, добавив дополнительные критерии:

```python
FILTER_USER_PROMPT = """...

Дополнительные критерии:
- Приоритет для статей о Django и FastAPI
- Исключить статьи старше 1 месяца
- Предпочтение русскоязычному контенту

{format_instructions}"""
```
